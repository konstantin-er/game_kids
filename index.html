<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–µ—Ç—Å–∫–∏–µ –ø–∞–∑–ª—ã</title>
    
    <!-- PWA –º–µ—Ç–∞-—Ç–µ–≥–∏ -->
    <meta name="theme-color" content="#ff9a9e">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="–î–µ—Ç—Å–∫–∏–µ –ø–∞–∑–ª—ã">
    <meta name="description" content="–£–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è –∏–≥—Ä–∞-–ø–∞–∑–ª –¥–ª—è –¥–µ—Ç–µ–π —Å –∫—Ä–∞—Å–æ—á–Ω—ã–º–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏">
    
    <!-- –ò–∫–æ–Ω–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZjlhOWUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZWNmZWYiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgZmlsbD0idXJsKCNhKSIgcng9IjUwIi8+PHRleHQgeD0iMjU2IiB5PSIzMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjIwMCIgZmlsbD0iI2ZmNmI2YiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+8J+nqTwvdGV4dD48L3N2Zz4=">
    <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZjlhOWUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZWNmZWYiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgZmlsbD0idXJsKCNhKSIgcng9IjUwIi8+PHRleHQgeD0iMjU2IiB5PSIzMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjIwMCIgZmlsbD0iI2ZmNmI2YiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+8J+nqTwvdGV4dD48L3N2Zz4=">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', cursive, sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 3em;
            color: #ff6b6b;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }

        .screen {
            display: none;
            animation: fadeIn 0.5s ease-in;
        }

        .screen.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é */
        .main-menu {
            text-align: center;
        }

        .menu-button {
            display: inline-block;
            padding: 20px 40px;
            margin: 15px;
            background: linear-gradient(45deg, #4ecdc4, #44a08d);
            color: white;
            text-decoration: none;
            border-radius: 25px;
            font-size: 1.8em;
            font-weight: bold;
            border: none;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .menu-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .difficulty-button {
            background: linear-gradient(45deg, #ffecd2, #fcb69f);
            color: #333;
            margin: 10px;
            padding: 15px 30px;
            font-size: 1.5em;
        }

        .difficulty-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .difficulty-button.locked::after {
            content: "üîí";
            margin-left: 10px;
        }

        /* –ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ */
        .game-area {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            align-items: flex-start;
        }

        .puzzle-board {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            position: relative;
            min-height: 300px;
        }

        .pieces-area {
            background: rgba(255,255,255,0.9);
            border-radius: 15px;
            padding: 20px;
            min-height: 300px;
            max-width: 300px;
        }

        .puzzle-piece {
            width: 80px;
            height: 80px;
            border: 2px solid #333;
            border-radius: 8px;
            cursor: grab;
            margin: 5px;
            display: inline-block;
            background-size: cover;
            background-position: center;
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
        }

        .puzzle-piece:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .puzzle-piece.dragging {
            cursor: grabbing;
            z-index: 1000;
            transform: scale(1.1);
        }

        .drop-zone {
            width: 80px;
            height: 80px;
            border: 3px dashed #ccc;
            border-radius: 8px;
            margin: 2px;
            display: inline-block;
            position: relative;
            transition: all 0.3s;
        }

        .drop-zone.highlight {
            border-color: #4ecdc4;
            background-color: rgba(78, 205, 196, 0.2);
        }

        .drop-zone.filled {
            border: none;
        }

        /* –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–≥—Ä—ã */
        .game-ui {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 10px;
        }

        .score, .timer {
            background: rgba(255,255,255,0.9);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
        }

        .back-button {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.1em;
            transition: transform 0.2s;
        }

        .back-button:hover {
            transform: scale(1.05);
        }

        .hint-button {
            background: #ffd93d;
            color: #333;
            border: none;
            padding: 10px 20px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.1em;
            margin: 0 10px;
        }

        .preview-button {
            background: #6bcf7f;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 1.1em;
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 500px;
            margin: 20px;
        }

        .preview-image {
            max-width: 100%;
            max-height: 400px;
            border-radius: 10px;
            margin: 20px 0;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω */
        @media (max-width: 768px) {
            .title {
                font-size: 2.5em;
            }
            
            .menu-button {
                font-size: 1.5em;
                padding: 15px 30px;
                margin: 10px 5px;
            }
            
            .game-area {
                flex-direction: column;
                align-items: center;
            }
            
            .puzzle-piece, .drop-zone {
                width: 60px;
                height: 60px;
            }
            
            .game-ui {
                justify-content: center;
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            .title {
                font-size: 2em;
            }
            
            .puzzle-piece, .drop-zone {
                width: 50px;
                height: 50px;
            }
            
            .pieces-area, .puzzle-board {
                padding: 10px;
                max-width: 100%;
            }
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ —É—Å–ø–µ—Ö–∞ */
        .success-animation {
            animation: bounce 0.6s ease-in-out;
        }

        @keyframes bounce {
            0%, 20%, 60%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            80% { transform: translateY(-10px); }
        }

        /* –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∏ */
        .hint-highlight {
            animation: glow 1s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { box-shadow: 0 0 5px #ffd93d; }
            to { box-shadow: 0 0 20px #ffd93d, 0 0 30px #ffd93d; }
        }

        .image-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .image-option {
            border: 3px solid transparent;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }

        .image-option:hover {
            border-color: #4ecdc4;
            transform: scale(1.05);
        }

        .image-option.selected {
            border-color: #ff6b6b;
        }

        .image-option img {
            width: 100%;
            height: 120px;
            object-fit: cover;
        }

        .upload-area {
            border: 3px dashed #ccc;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin: 20px 0;
        }

        .upload-area:hover {
            border-color: #4ecdc4;
            background: rgba(78, 205, 196, 0.1);
        }

        .stats {
            background: rgba(255,255,255,0.9);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .install-button {
            display: none;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 20px;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .install-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
        }

        .install-button.visible {
            display: inline-block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .offline-indicator {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #4ecdc4;
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            z-index: 1001;
            display: none;
        }

        .offline-indicator.offline {
            background: #ff6b6b;
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –æ—Ñ—Ñ–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å–∞ -->
        <div class="offline-indicator" id="offline-indicator">
            üì± –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω
        </div>

        <div class="header">
            <h1 class="title">üß© –î–µ—Ç—Å–∫–∏–µ –ø–∞–∑–ª—ã üß©</h1>
            <!-- –ö–Ω–æ–ø–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ PWA -->
            <button class="install-button" id="install-button" onclick="installApp()">
                üì± –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            </button>
        </div>

        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div class="screen active" id="main-menu">
            <div class="main-menu">
                <button class="menu-button" onclick="showImageSelection()">üéÆ –ò–≥—Ä–∞—Ç—å</button>
                <button class="menu-button" onclick="showStats()">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                <div class="stats" id="main-stats">
                    <h3>–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å:</h3>
                    <p>–°–æ–±—Ä–∞–Ω–æ –ø–∞–∑–ª–æ–≤: <span id="completed-puzzles">0</span></p>
                    <p>–û–±—â–∏–π —Å—á–µ—Ç: <span id="total-score">0</span></p>
                    <p>–õ—É—á—à–µ–µ –≤—Ä–µ–º—è: <span id="best-time">--:--</span></p>
                    <button class="menu-button" onclick="resetProgress()" style="background: #ff6b6b; font-size: 1em; padding: 10px 20px; margin-top: 10px;">üîÑ –°–±—Ä–æ—Å–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å</button>
                </div>
            </div>
        </div>

        <!-- –í—ã–±–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è -->
        <div class="screen" id="image-selection">
            <div class="game-ui">
                <button class="back-button" onclick="showMainMenu()">‚¨Ö –ù–∞–∑–∞–¥</button>
                <h2>–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ä—Ç–∏–Ω–∫—É</h2>
            </div>
            
            <div class="upload-area" onclick="document.getElementById('file-input').click()">
                üìÅ –ó–∞–≥—Ä—É–∑–∏—Ç—å —Å–≤–æ—é –∫–∞—Ä—Ç–∏–Ω–∫—É
                <input type="file" id="file-input" accept="image/*" style="display: none;" onchange="loadCustomImage(event)">
            </div>
            
            <div class="image-selector" id="image-options">
                <!-- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button class="menu-button" onclick="showDifficultySelection()" id="select-image-btn" disabled>–í—ã–±—Ä–∞—Ç—å —Å–ª–æ–∂–Ω–æ—Å—Ç—å</button>
            </div>
        </div>

        <!-- –í—ã–±–æ—Ä —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ -->
        <div class="screen" id="difficulty-selection">
            <div class="game-ui">
                <button class="back-button" onclick="showImageSelection()">‚¨Ö –ù–∞–∑–∞–¥</button>
                <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å</h2>
            </div>
            <div class="main-menu">
                <button class="difficulty-button" onclick="startGame('easy')" id="easy-btn">
                    üòä –õ–µ–≥–∫–æ (6 —á–∞—Å—Ç–µ–π)
                </button>
                <button class="difficulty-button" onclick="startGame('medium')" id="medium-btn">
                    ü§î –°—Ä–µ–¥–Ω–µ (12 —á–∞—Å—Ç–µ–π)
                </button>
                <button class="difficulty-button" onclick="startGame('hard')" id="hard-btn">
                    üò§ –°–ª–æ–∂–Ω–æ (20 —á–∞—Å—Ç–µ–π)
                </button>
            </div>
        </div>

        <!-- –ò–≥—Ä–æ–≤–æ–π —ç–∫—Ä–∞–Ω -->
        <div class="screen" id="game-screen">
            <div class="game-ui">
                <button class="back-button" onclick="showDifficultySelection()">‚¨Ö –ù–∞–∑–∞–¥</button>
                <div class="score">–°—á–µ—Ç: <span id="current-score">0</span></div>
                <div class="timer">–í—Ä–µ–º—è: <span id="game-timer">00:00</span></div>
                <button class="hint-button" onclick="showHint()">üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞</button>
                <button class="preview-button" onclick="showPreview()">üëÅ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å</button>
            </div>
            
            <div class="game-area">
                <div class="puzzle-board" id="puzzle-board">
                    <!-- –ó–æ–Ω—ã –¥–ª—è —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –∫—É—Å–æ—á–∫–æ–≤ -->
                </div>
                <div class="pieces-area" id="pieces-area">
                    <h3 style="text-align: center; margin-bottom: 15px;">–ö—É—Å–æ—á–∫–∏ –ø–∞–∑–ª–∞</h3>
                    <!-- –ö—É—Å–æ—á–∫–∏ –ø–∞–∑–ª–∞ -->
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ -->
    <div class="modal" id="preview-modal">
        <div class="modal-content">
            <h3>–ü–æ–ª–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞</h3>
            <img id="preview-img" class="preview-image" src="" alt="Preview">
            <br>
            <button class="menu-button" onclick="closeModal('preview-modal')">–ó–∞–∫—Ä—ã—Ç—å</button>
        </div>
    </div>

    <div class="modal" id="success-modal">
        <div class="modal-content">
            <h2>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! üéâ</h2>
            <p>–í—ã —Å–æ–±—Ä–∞–ª–∏ –ø–∞–∑–ª!</p>
            <p>–í—Ä–µ–º—è: <span id="final-time"></span></p>
            <p>–°—á–µ—Ç: <span id="final-score"></span></p>
            <br>
            <button class="menu-button" onclick="showDifficultySelection()">–ò–≥—Ä–∞—Ç—å –µ—â–µ</button>
            <button class="menu-button" onclick="showMainMenu()">–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é</button>
        </div>
    </div>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentImage = null;
        let currentDifficulty = null;
        let gameStartTime = null;
        let gameTimer = null;
        let currentScore = 0;
        let hintsUsed = 0;
        let placedPieces = 0;
        let totalPieces = 0;
        let draggedElement = null;
        let gameProgress = {
            completedPuzzles: 0,
            totalScore: 0,
            bestTime: null,
            unlockedDifficulties: ['easy']
        };

        // –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (base64 –º–∏–Ω–∏-–≤–µ—Ä—Å–∏–∏ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)
        const presetImages = [
            {
                id: 'cat',
                name: '–ö–æ—Ç–µ–Ω–æ–∫',
                category: 'animals',
                src: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmZiM2JhIi8+PGNpcmNsZSBjeD0iMTAwIiBjeT0iMTAwIiByPSI2MCIgZmlsbD0iI2ZmODc5NCIvPjx0ZXh0IHg9IjEwMCIgeT0iMTEwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjMwIj7wn5CxPC90ZXh0Pjwvc3ZnPg=='
            },
            {
                id: 'car',
                name: '–ú–∞—à–∏–Ω–∫–∞',
                category: 'transport',
                src: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjODNhNWZmIi8+PGNpcmNsZSBjeD0iMTAwIiBjeT0iMTAwIiByPSI2MCIgZmlsbD0iIzU2N2RmZiIvPjx0ZXh0IHg9IjEwMCIgeT0iMTEwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjMwIj7wn5qXPC90ZXh0Pjwvc3ZnPg=='
            },
            {
                id: 'flower',
                name: '–¶–≤–µ—Ç–æ—á–µ–∫',
                category: 'nature',
                src: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjYzNmZmI2Ii8+PGNpcmNsZSBjeD0iMTAwIiBjeT0iMTAwIiByPSI2MCIgZmlsbD0iIzg5ZmY3NiIvPjx0ZXh0IHg9IjEwMCIgeT0iMTEwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjMwIj7wn4yyPC90ZXh0Pjwvc3ZnPg=='
            },
            {
                id: 'sun',
                name: '–°–æ–ª–Ω—ã—à–∫–æ',
                category: 'nature',
                src: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmZmNGMxIi8+PGNpcmNsZSBjeD0iMTAwIiBjeT0iMTAwIiByPSI2MCIgZmlsbD0iI2ZmZDkzZCIvPjx0ZXh0IHg9IjEwMCIgeT0iMTEwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjMwIj7inJjvuI8gPC90ZXh0Pjwvc3ZnPg=='
            },
            {
                id: 'balloon',
                name: '–í–æ–∑–¥—É—à–Ω—ã–π —à–∞—Ä',
                category: 'toys',
                src: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZmZlNGU2Ii8+PGNpcmNsZSBjeD0iMTAwIiBjeT0iMTAwIiByPSI2MCIgZmlsbD0iI2ZmYjNiYSIvPjx0ZXh0IHg9IjEwMCIgeT0iMTEwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBmb250LXNpemU9IjMwIj7wn46I77iPPC90ZXh0Pjwvc3ZnPg=='
            }
        ];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', function() {
            loadProgress();
            updateMainStats();
            loadPresetImages();
            updateDifficultyButtons();
        });

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —ç–∫—Ä–∞–Ω–∞–º–∏
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        function showMainMenu() {
            showScreen('main-menu');
            updateMainStats();
        }

        function showImageSelection() {
            showScreen('image-selection');
            loadPresetImages();
        }

        function showDifficultySelection() {
            if (!currentImage) {
                alert('–°–Ω–∞—á–∞–ª–∞ –≤—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ!');
                return;
            }
            showScreen('difficulty-selection');
            updateDifficultyButtons();
        }

        function showStats() {
            updateMainStats();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
        function loadPresetImages() {
            const container = document.getElementById('image-options');
            container.innerHTML = '';
            
            presetImages.forEach(image => {
                const option = document.createElement('div');
                option.className = 'image-option';
                option.onclick = () => selectImage(image, option);
                
                const img = document.createElement('img');
                img.src = image.src;
                img.alt = image.name;
                
                const label = document.createElement('div');
                label.textContent = image.name;
                label.style.padding = '10px';
                label.style.textAlign = 'center';
                label.style.fontSize = '1.2em';
                label.style.fontWeight = 'bold';
                
                option.appendChild(img);
                option.appendChild(label);
                container.appendChild(option);
            });
        }

        // –í—ã–±–æ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function selectImage(image, element = null) {
            currentImage = image;
            
            // –£–±–∏—Ä–∞–µ–º –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å –¥—Ä—É–≥–∏—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
            document.querySelectorAll('.image-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // –í—ã–¥–µ–ª—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
            if (element) {
                element.classList.add('selected');
            } else if (event && event.target) {
                const imageOption = event.target.closest('.image-option');
                if (imageOption) {
                    imageOption.classList.add('selected');
                }
            }
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –≤—ã–±–æ—Ä–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
            document.getElementById('select-image-btn').disabled = false;
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
        function loadCustomImage(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const customImage = {
                    id: 'custom_' + Date.now(),
                    name: '–í–∞—à–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞',
                    category: 'custom',
                    src: e.target.result
                };
                
                // –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å–ø–∏—Å–æ–∫
                const container = document.getElementById('image-options');
                const option = document.createElement('div');
                option.className = 'image-option selected';
                option.onclick = () => selectImage(customImage, option);
                
                const img = document.createElement('img');
                img.src = customImage.src;
                img.alt = customImage.name;
                
                const label = document.createElement('div');
                label.textContent = customImage.name;
                label.style.padding = '10px';
                label.style.textAlign = 'center';
                label.style.fontSize = '1.2em';
                label.style.fontWeight = 'bold';
                
                option.appendChild(img);
                option.appendChild(label);
                container.insertBefore(option, container.firstChild);
                
                // –í—ã–±–∏—Ä–∞–µ–º –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
                selectImage(customImage, option);
            };
            reader.readAsDataURL(file);
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
        function updateDifficultyButtons() {
            const easyBtn = document.getElementById('easy-btn');
            const mediumBtn = document.getElementById('medium-btn');
            const hardBtn = document.getElementById('hard-btn');
            
            // –õ–µ–≥–∫–∏–π –≤—Å–µ–≥–¥–∞ –¥–æ—Å—Ç—É–ø–µ–Ω
            easyBtn.disabled = false;
            easyBtn.classList.remove('locked');
            
            // –°—Ä–µ–¥–Ω–∏–π –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ª–µ–≥–∫–æ–≥–æ
            if (gameProgress.unlockedDifficulties.includes('medium')) {
                mediumBtn.disabled = false;
                mediumBtn.classList.remove('locked');
            } else {
                mediumBtn.disabled = true;
                mediumBtn.classList.add('locked');
            }
            
            // –°–ª–æ–∂–Ω—ã–π –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å—Ä–µ–¥–Ω–µ–≥–æ
            if (gameProgress.unlockedDifficulties.includes('hard')) {
                hardBtn.disabled = false;
                hardBtn.classList.remove('locked');
            } else {
                hardBtn.disabled = true;
                hardBtn.classList.add('locked');
            }
        }

        // –ù–∞—á–∞–ª–æ –∏–≥—Ä—ã
        function startGame(difficulty) {
            currentDifficulty = difficulty;
            showScreen('game-screen');
            
            // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∫—É—Å–æ—á–∫–æ–≤
            const pieces = {
                easy: 6,
                medium: 12,
                hard: 20
            };
            
            totalPieces = pieces[difficulty];
            placedPieces = 0;
            currentScore = 0;
            hintsUsed = 0;
            
            generatePuzzle();
            startTimer();
            updateScore();
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–∞–∑–ª–∞
        function generatePuzzle() {
            const board = document.getElementById('puzzle-board');
            const pieces = document.getElementById('pieces-area');
            
            // –û—á–∏—â–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
            board.innerHTML = '';
            pieces.innerHTML = '<h3 style="text-align: center; margin-bottom: 15px;">–ö—É—Å–æ—á–∫–∏ –ø–∞–∑–ª–∞</h3>';
            
            // –í—ã—á–∏—Å–ª—è–µ–º —Ä–∞–∑–º–µ—Ä—ã —Å–µ—Ç–∫–∏
            const cols = Math.ceil(Math.sqrt(totalPieces));
            const rows = Math.ceil(totalPieces / cols);
            
            // –°–æ–∑–¥–∞–µ–º –∑–æ–Ω—ã —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
            board.style.display = 'grid';
            board.style.gridTemplateColumns = `repeat(${cols}, 80px)`;
            board.style.gridTemplateRows = `repeat(${rows}, 80px)`;
            board.style.gap = '2px';
            
            // –°–æ–∑–¥–∞–µ–º –∫—É—Å–æ—á–∫–∏ –∏ –∑–æ–Ω—ã
            for (let i = 0; i < totalPieces; i++) {
                // –ó–æ–Ω–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
                const dropZone = document.createElement('div');
                dropZone.className = 'drop-zone';
                dropZone.dataset.position = i;
                dropZone.addEventListener('dragover', handleDragOver);
                dropZone.addEventListener('drop', handleDrop);
                board.appendChild(dropZone);
                
                // –ö—É—Å–æ—á–µ–∫ –ø–∞–∑–ª–∞
                const piece = document.createElement('div');
                piece.className = 'puzzle-piece';
                piece.dataset.position = i;
                piece.draggable = true;
                piece.style.backgroundImage = `url(${currentImage.src})`;
                
                // –í—ã—á–∏—Å–ª—è–µ–º –ø–æ–∑–∏—Ü–∏—é —Ñ–æ–Ω–æ–≤–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
                const col = i % cols;
                const row = Math.floor(i / cols);
                const bgX = -(col * 80);
                const bgY = -(row * 80);
                piece.style.backgroundPosition = `${bgX}px ${bgY}px`;
                piece.style.backgroundSize = `${cols * 80}px ${rows * 80}px`;
                
                piece.addEventListener('dragstart', handleDragStart);
                piece.addEventListener('dragend', handleDragEnd);
                
                pieces.appendChild(piece);
            }
            
            // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º –∫—É—Å–æ—á–∫–∏
            shufflePieces();
        }

        // –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏–µ –∫—É—Å–æ—á–∫–æ–≤
        function shufflePieces() {
            const piecesContainer = document.getElementById('pieces-area');
            const pieces = Array.from(piecesContainer.querySelectorAll('.puzzle-piece'));
            
            // –ê–ª–≥–æ—Ä–∏—Ç–º –§–∏—à–µ—Ä–∞-–ô–µ—Ç—Å–∞ –¥–ª—è –ø–µ—Ä–µ–º–µ—à–∏–≤–∞–Ω–∏—è
            for (let i = pieces.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                piecesContainer.appendChild(pieces[j]);
            }
        }

        // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ drag and drop
        function handleDragStart(e) {
            draggedElement = e.target;
            e.target.classList.add('dragging');
            e.dataTransfer.effectAllowed = 'move';
        }

        function handleDragEnd(e) {
            if (e.target && e.target.classList) {
                e.target.classList.remove('dragging');
            }
            document.querySelectorAll('.drop-zone').forEach(zone => {
                if (zone.classList) {
                    zone.classList.remove('highlight');
                }
            });
        }

        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            e.target.classList.add('highlight');
        }

        function handleDrop(e) {
            e.preventDefault();
            
            // –ë–µ–∑–æ–ø–∞—Å–Ω–æ —É–±–∏—Ä–∞–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É
            if (e.target && e.target.classList) {
                e.target.classList.remove('highlight');
            }
            
            if (!draggedElement) return;
            
            const dropZone = e.target;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ dropZone —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –∏–º–µ–µ—Ç –Ω—É–∂–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
            if (!dropZone || !dropZone.dataset) return;
            
            const piecePosition = parseInt(draggedElement.dataset.position);
            const zonePosition = parseInt(dropZone.dataset.position);
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ä–∞–∑–º–µ—â–µ–Ω–∏—è
            if (piecePosition === zonePosition && !dropZone.classList.contains('filled')) {
                // –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ
                dropZone.appendChild(draggedElement);
                dropZone.classList.add('filled');
                draggedElement.classList.add('success-animation');
                
                placedPieces++;
                currentScore += 100 - (hintsUsed * 10); // –ë–æ–Ω—É—Å –∑–∞ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –º–∏–Ω—É—Å —à—Ç—Ä–∞—Ñ –∑–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∏
                
                // –ó–≤—É–∫–æ–≤–∞—è –∏ –≤–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å
                playSuccessSound();
                updateScore();
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–∞–∑–ª–∞
                if (placedPieces === totalPieces) {
                    completePuzzle();
                }
                
                setTimeout(() => {
                    if (draggedElement && draggedElement.classList) {
                        draggedElement.classList.remove('success-animation');
                    }
                }, 600);
            } else {
                // –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –∫—É—Å–æ—á–µ–∫ –æ–±—Ä–∞—Ç–Ω–æ
                playErrorSound();
            }
            
            draggedElement = null;
        }

        // –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (–ø—Ä–æ—Å—Ç—ã–µ beep-–∑–≤—É–∫–∏)
        function playSuccessSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(1000, audioContext.currentTime + 0.1);
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.1);
        }

        function playErrorSound() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(300, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(200, audioContext.currentTime + 0.2);
            
            gainNode.gain.setValueAtTime(0.2, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.2);
        }

        // –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥—Å–∫–∞–∑–æ–∫
        function showHint() {
            const unplacedPieces = document.querySelectorAll('#pieces-area .puzzle-piece');
            if (unplacedPieces.length === 0) return;
            
            // –ù–∞—Ö–æ–¥–∏–º –ø–µ—Ä–≤—ã–π –Ω–µ—Ä–∞–∑–º–µ—â–µ–Ω–Ω—ã–π –∫—É—Å–æ—á–µ–∫
            const piece = unplacedPieces[0];
            const position = parseInt(piece.dataset.position);
            const targetZone = document.querySelector(`[data-position="${position}"]`);
            
            // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –∫—É—Å–æ—á–µ–∫ –∏ –∑–æ–Ω—É
            piece.classList.add('hint-highlight');
            targetZone.classList.add('hint-highlight');
            
            hintsUsed++;
            currentScore = Math.max(0, currentScore - 20); // –®—Ç—Ä–∞—Ñ –∑–∞ –ø–æ–¥—Å–∫–∞–∑–∫—É
            updateScore();
            
            setTimeout(() => {
                piece.classList.remove('hint-highlight');
                targetZone.classList.remove('hint-highlight');
            }, 2000);
        }

        // –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä
        function showPreview() {
            document.getElementById('preview-img').src = currentImage.src;
            showModal('preview-modal');
        }

        // –¢–∞–π–º–µ—Ä
        function startTimer() {
            gameStartTime = Date.now();
            gameTimer = setInterval(updateTimer, 1000);
        }

        function updateTimer() {
            const elapsed = Date.now() - gameStartTime;
            const minutes = Math.floor(elapsed / 60000);
            const seconds = Math.floor((elapsed % 60000) / 1000);
            
            document.getElementById('game-timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function stopTimer() {
            if (gameTimer) {
                clearInterval(gameTimer);
                gameTimer = null;
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç–∞
        function updateScore() {
            document.getElementById('current-score').textContent = currentScore;
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–∞–∑–ª–∞
        function completePuzzle() {
            stopTimer();
            
            const finalTime = Date.now() - gameStartTime;
            const minutes = Math.floor(finalTime / 60000);
            const seconds = Math.floor((finalTime % 60000) / 1000);
            const timeString = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // –ë–æ–Ω—É—Å –∑–∞ —Å–∫–æ—Ä–æ—Å—Ç—å
            const timeBonus = Math.max(0, 300 - Math.floor(finalTime / 1000));
            currentScore += timeBonus;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
            gameProgress.completedPuzzles++;
            gameProgress.totalScore += currentScore;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ª—É—á—à–µ–µ –≤—Ä–µ–º—è
            if (!gameProgress.bestTime || finalTime < gameProgress.bestTime) {
                gameProgress.bestTime = finalTime;
            }
            
            // –†–∞–∑–±–ª–æ–∫–∏—Ä—É–µ–º —Å–ª–µ–¥—É—é—â—É—é —Å–ª–æ–∂–Ω–æ—Å—Ç—å
            if (currentDifficulty === 'easy' && !gameProgress.unlockedDifficulties.includes('medium')) {
                gameProgress.unlockedDifficulties.push('medium');
            } else if (currentDifficulty === 'medium' && !gameProgress.unlockedDifficulties.includes('hard')) {
                gameProgress.unlockedDifficulties.push('hard');
            }
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å
            saveProgress();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —É—Å–ø–µ—Ö–∞
            document.getElementById('final-time').textContent = timeString;
            document.getElementById('final-score').textContent = currentScore;
            showModal('success-modal');
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–æ–º
        function loadProgress() {
            try {
                const saved = localStorage.getItem('kids_puzzle_progress');
                if (saved) {
                    const savedProgress = JSON.parse(saved);
                    gameProgress = {
                        completedPuzzles: savedProgress.completedPuzzles || 0,
                        totalScore: savedProgress.totalScore || 0,
                        bestTime: savedProgress.bestTime || null,
                        unlockedDifficulties: savedProgress.unlockedDifficulties || ['easy']
                    };
                }
            } catch (error) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å:', error);
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                gameProgress = {
                    completedPuzzles: 0,
                    totalScore: 0,
                    bestTime: null,
                    unlockedDifficulties: ['easy']
                };
            }
        }

        function saveProgress() {
            try {
                localStorage.setItem('kids_puzzle_progress', JSON.stringify(gameProgress));
            } catch (error) {
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å:', error);
            }
        }

        function resetProgress() {
            gameProgress = {
                completedPuzzles: 0,
                totalScore: 0,
                bestTime: null,
                unlockedDifficulties: ['easy']
            };
            saveProgress();
            updateMainStats();
            updateDifficultyButtons();
            alert('–ü—Ä–æ–≥—Ä–µ—Å—Å —Å–±—Ä–æ—à–µ–Ω!');
        }

        function updateMainStats() {
            document.getElementById('completed-puzzles').textContent = gameProgress.completedPuzzles;
            document.getElementById('total-score').textContent = gameProgress.totalScore;
            
            if (gameProgress.bestTime) {
                const minutes = Math.floor(gameProgress.bestTime / 60000);
                const seconds = Math.floor((gameProgress.bestTime % 60000) / 1000);
                document.getElementById('best-time').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }
        }

        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω—ã–º–∏ –æ–∫–Ω–∞–º–∏
        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ —É—Å–ø–µ—Ö–∞
        function playAgain() {
            closeModal('success-modal');
            setTimeout(() => {
                showDifficultySelection();
            }, 100);
        }

        function goToMainMenu() {
            closeModal('success-modal');
            setTimeout(() => {
                showMainMenu();
            }, 100);
        }

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.classList.remove('active');
            }
        });

        // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–∞—á-—Å–æ–±—ã—Ç–∏–π –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
        document.addEventListener('touchstart', handleTouchStart, {passive: false});
        document.addEventListener('touchmove', handleTouchMove, {passive: false});
        document.addEventListener('touchend', handleTouchEnd, {passive: false});

        let touchItem = null;
        let touchStartX = 0;
        let touchStartY = 0;

        function handleTouchStart(e) {
            if (e.target.classList.contains('puzzle-piece')) {
                touchItem = e.target;
                touchStartX = e.touches[0].clientX;
                touchStartY = e.touches[0].clientY;
                touchItem.classList.add('dragging');
                e.preventDefault();
            }
        }

        function handleTouchMove(e) {
            if (!touchItem) return;
            
            e.preventDefault();
            const touch = e.touches[0];
            touchItem.style.position = 'fixed';
            touchItem.style.left = touch.clientX - 40 + 'px';
            touchItem.style.top = touch.clientY - 40 + 'px';
            touchItem.style.zIndex = '1000';
            
            // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º –∑–æ–Ω—É –ø–æ–¥ –ø–∞–ª—å—Ü–µ–º
            const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);
            document.querySelectorAll('.drop-zone').forEach(zone => {
                zone.classList.remove('highlight');
            });
            
            if (elementBelow && elementBelow.classList.contains('drop-zone')) {
                elementBelow.classList.add('highlight');
            }
        }

        function handleTouchEnd(e) {
            if (!touchItem) return;
            
            const touch = e.changedTouches[0];
            const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);
            
            // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—Ç–∏–ª–∏
            touchItem.style.position = '';
            touchItem.style.left = '';
            touchItem.style.top = '';
            touchItem.style.zIndex = '';
            
            if (touchItem.classList) {
                touchItem.classList.remove('dragging');
            }
            
            document.querySelectorAll('.drop-zone').forEach(zone => {
                if (zone.classList) {
                    zone.classList.remove('highlight');
                }
            });
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥—Ä–æ–ø
            if (elementBelow && elementBelow.classList && elementBelow.classList.contains('drop-zone')) {
                const piecePosition = parseInt(touchItem.dataset.position);
                const zonePosition = parseInt(elementBelow.dataset.position);
                
                if (piecePosition === zonePosition && !elementBelow.classList.contains('filled')) {
                    elementBelow.appendChild(touchItem);
                    elementBelow.classList.add('filled');
                    touchItem.classList.add('success-animation');
                    
                    placedPieces++;
                    currentScore += 100 - (hintsUsed * 10);
                    
                    playSuccessSound();
                    updateScore();
                    
                    if (placedPieces === totalPieces) {
                        completePuzzle();
                    }
                    
                    setTimeout(() => {
                        if (touchItem && touchItem.classList) {
                            touchItem.classList.remove('success-animation');
                        }
                    }, 600);
                } else {
                    playErrorSound();
                }
            }
            
            touchItem = null;
        }

        // PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
        let deferredPrompt;
        let isInstalled = false;

        // –°–æ–∑–¥–∞—ë–º –≤–µ–±-–º–∞–Ω–∏—Ñ–µ—Å—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ
        const webManifest = {
            name: "–î–µ—Ç—Å–∫–∏–µ –ø–∞–∑–ª—ã",
            short_name: "–ü–∞–∑–ª—ã",
            description: "–£–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–∞—è –∏–≥—Ä–∞-–ø–∞–∑–ª –¥–ª—è –¥–µ—Ç–µ–π —Å –∫—Ä–∞—Å–æ—á–Ω—ã–º–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏",
            start_url: "./",
            display: "standalone",
            background_color: "#ff9a9e",
            theme_color: "#ff9a9e",
            orientation: "any",
            icons: [
                {
                    src: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZjlhOWUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZWNmZWYiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgZmlsbD0idXJsKCNhKSIgcng9IjIwIi8+PHRleHQgeD0iOTYiIHk9IjEyMCIgZm9udC1mYW1pbHk9InNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iODAiIGZpbGw9IiNmZjZiNmIiIHRleHQtYW5jaG9yPSJtaWRkbGUiPvCfp6k8L3RleHQ+PC9zdmc+",
                    sizes: "192x192",
                    type: "image/svg+xml"
                },
                {
                    src: "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImEiIHgxPSIwJSIgeTE9IjAlIiB4Mj0iMTAwJSIgeTI9IjEwMCUiPjxzdG9wIG9mZnNldD0iMCUiIHN0b3AtY29sb3I9IiNmZjlhOWUiLz48c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNmZWNmZWYiLz48L2xpbmVhckdyYWRpZW50PjwvZGVmcz48cmVjdCB3aWR0aD0iNTEyIiBoZWlnaHQ9IjUxMiIgZmlsbD0idXJsKCNhKSIgcng9IjUwIi8+PHRleHQgeD0iMjU2IiB5PSIzMDAiIGZvbnQtZmFtaWx5PSJzYW5zLXNlcmlmIiBmb250LXNpemU9IjIwMCIgZmlsbD0iI2ZmNmI2YiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+8J+nqTwvdGV4dD48L3N2Zz4=",
                    sizes: "512x512",
                    type: "image/svg+xml"
                }
            ]
        };

        // –î–æ–±–∞–≤–ª—è–µ–º –º–∞–Ω–∏—Ñ–µ—Å—Ç –≤ –¥–æ–∫—É–º–µ–Ω—Ç
        const manifestBlob = new Blob([JSON.stringify(webManifest)], {type: 'application/json'});
        const manifestURL = URL.createObjectURL(manifestBlob);
        const manifestLink = document.createElement('link');
        manifestLink.rel = 'manifest';
        manifestLink.href = manifestURL;
        document.head.appendChild(manifestLink);

        // Service Worker –∫–æ–¥
        const serviceWorkerCode = `
            const CACHE_NAME = 'kids-puzzle-v1';
            const urlsToCache = [
                './',
                './?utm_source=pwa'
            ];

            self.addEventListener('install', function(event) {
                event.waitUntil(
                    caches.open(CACHE_NAME)
                        .then(function(cache) {
                            return cache.addAll(urlsToCache);
                        })
                );
            });

            self.addEventListener('fetch', function(event) {
                event.respondWith(
                    caches.match(event.request)
                        .then(function(response) {
                            if (response) {
                                return response;
                            }
                            return fetch(event.request);
                        }
                    )
                );
            });
        `;

        // –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º Service Worker —Ç–æ–ª—å–∫–æ –¥–ª—è HTTPS/localhost
        if ('serviceWorker' in navigator && (location.protocol === 'https:' || location.hostname === 'localhost' || location.hostname === '127.0.0.1')) {
            const swBlob = new Blob([serviceWorkerCode], {type: 'application/javascript'});
            const swURL = URL.createObjectURL(swBlob);
            
            navigator.serviceWorker.register(swURL)
                .then(function(registration) {
                    console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ:', registration.scope);
                })
                .catch(function(error) {
                    console.log('–û—à–∏–±–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ Service Worker:', error);
                });
        } else if (location.protocol === 'file:') {
            console.log('Service Worker –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤. –î–ª—è –ø–æ–ª–Ω–æ–π PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.');
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è beforeinstallprompt
        window.addEventListener('beforeinstallprompt', (e) => {
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞
            e.preventDefault();
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–±—ã—Ç–∏–µ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–æ–∑–∂–µ
            deferredPrompt = e;
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏
            showInstallButton();
        });

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
        window.addEventListener('appinstalled', (evt) => {
            console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ!');
            hideInstallButton();
            isInstalled = true;
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
            alert('üéâ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ "–î–µ—Ç—Å–∫–∏–µ –ø–∞–∑–ª—ã" –Ω–∞ –¥–æ–º–∞—à–Ω–µ–º —ç–∫—Ä–∞–Ω–µ.');
        });

        // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –∫–Ω–æ–ø–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
        function showInstallButton() {
            const installButton = document.getElementById('install-button');
            if (installButton && !isInstalled) {
                installButton.classList.add('visible');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —Å–∫—Ä—ã—Ç–∏—è –∫–Ω–æ–ø–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
        function hideInstallButton() {
            const installButton = document.getElementById('install-button');
            if (installButton) {
                installButton.classList.remove('visible');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function installApp() {
            if (deferredPrompt) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–º–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
                deferredPrompt.prompt();
                // –ñ–¥—ë–º –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                deferredPrompt.userChoice.then((choiceResult) => {
                    if (choiceResult.outcome === 'accepted') {
                        console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–≥–ª–∞—Å–∏–ª—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ');
                    } else {
                        console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫–ª–æ–Ω–∏–ª —É—Å—Ç–∞–Ω–æ–≤–∫—É');
                    }
                    deferredPrompt = null;
                });
            } else {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º
                let instructions = '';
                
                if (/iPad|iPhone|iPod/.test(navigator.userAgent)) {
                    instructions = '–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ iPhone/iPad:\n\n1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" ‚ÜóÔ∏è –≤–Ω–∏–∑—É\n2. –í—ã–±–µ—Ä–∏—Ç–µ "–ù–∞ —ç–∫—Ä–∞–Ω –î–æ–º–æ–π"\n3. –ù–∞–∂–º–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å"';
                } else if (/Android/.test(navigator.userAgent)) {
                    instructions = '–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ Android:\n\n1. –í –º–µ–Ω—é –±—Ä–∞—É–∑–µ—Ä–∞ (‚ãÆ) –≤—ã–±–µ—Ä–∏—Ç–µ "–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω"\n–ò–õ–ò\n2. –í –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –Ω–∞–∂–º–∏—Ç–µ –∏–∫–æ–Ω–∫—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏';
                } else {
                    instructions = '–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏:\n\n‚Ä¢ Chrome: –ú–µ–Ω—é ‚Üí "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"\n‚Ä¢ Safari: –ü–æ–¥–µ–ª–∏—Ç—å—Å—è ‚Üí "–ù–∞ —ç–∫—Ä–∞–Ω –î–æ–º–æ–π"\n‚Ä¢ Edge: –ú–µ–Ω—é ‚Üí "–ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è" ‚Üí "–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"';
                    
                    if (location.protocol === 'file:') {
                        instructions += '\n\nüí° –î–ª—è –ø–æ–ª–Ω–æ–π PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç–µ —Ñ–∞–π–ª –Ω–∞ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ GitHub Pages –∏–ª–∏ Netlify)';
                    }
                }
                
                alert(instructions);
            }
        }

        // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ–Ω–ª–∞–π–Ω/–æ—Ñ—Ñ–ª–∞–π–Ω —Å—Ç–∞—Ç—É—Å–∞
        function updateOnlineStatus() {
            const indicator = document.getElementById('offline-indicator');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ Service Worker –¥–æ—Å—Ç—É–ø–µ–Ω
            const hasServiceWorker = 'serviceWorker' in navigator && 
                (location.protocol === 'https:' || location.hostname === 'localhost' || location.hostname === '127.0.0.1');
            
            if (!hasServiceWorker) {
                indicator.style.display = 'none';
                return;
            }
            
            if (navigator.onLine) {
                indicator.classList.remove('offline');
                indicator.textContent = 'üåê –û–Ω–ª–∞–π–Ω';
                setTimeout(() => {
                    indicator.style.display = 'none';
                }, 2000);
            } else {
                indicator.classList.add('offline');
                indicator.textContent = 'üì± –†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ—Ñ–ª–∞–π–Ω';
                indicator.style.display = 'block';
            }
        }

        window.addEventListener('online', updateOnlineStatus);
        window.addEventListener('offline', updateOnlineStatus);

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            updateOnlineStatus();
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª–∞
            const installButton = document.getElementById('install-button');
            if (location.protocol === 'file:') {
                installButton.textContent = 'üì± –ö–∞–∫ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å?';
                installButton.classList.add('visible'); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É –≤—Å–µ–≥–¥–∞ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –∑–∞–ø—É—â–µ–Ω–æ –ª–∏ –∫–∞–∫ PWA
            if (window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone) {
                console.log('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ –∫–∞–∫ PWA!');
                isInstalled = true;
                hideInstallButton();
            }
            
            // –î–ª—è iOS Safari –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
            if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
                setTimeout(() => {
                    if (!isInstalled && !localStorage.getItem('ios_install_shown')) {
                        alert('üí° –î–ª—è –ª—É—á—à–µ–≥–æ –æ–ø—ã—Ç–∞:\n\n–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" ‚ÜóÔ∏è –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞, –∑–∞—Ç–µ–º –≤—ã–±–µ—Ä–∏—Ç–µ "–ù–∞ —ç–∫—Ä–∞–Ω –î–æ–º–æ–π" —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–≥—Ä—É –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!');
                        localStorage.setItem('ios_install_shown', 'true');
                    }
                }, 3000);
            }
        });
    </script>
</body>
</html>